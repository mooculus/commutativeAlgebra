\documentclass{ximera}

\input{../preamble.tex}

\author{Bart Snapp}

\title{Applications of integral extensions}

\begin{document}
\begin{abstract}
  We give examples and applications of integral extensions. Sources
  and references: \cite{GP2008,jpS2000}.
\end{abstract}
\maketitle



\section{Normal domains}
The word ``normal'' is synonymous with ``integrally closed'' in algebra and algebraic geometry.

\begin{definition}
  A \dfn{normal domain} is an integrally closed domain.
\end{definition}



\begin{theorem}
  Let $A$ be a UFD, then $A = \tilde{A}$.
  \begin{proof}
    Let $\alpha \in \ff(A)$ with $\alpha = a/b$ and $a,b\in A$ where
    $a$ and $b$ have no common factors.  We must show that if there is
    an integral relation for $\alpha$, then $\alpha\in A$. For $c_i\in
    A$, suppose we have
    \begin{align*}
      \alpha^n + c_{n-1} \alpha^{n-1}+ \dots + c_1 \alpha + c_0 &= 0 \\
      (a/b)^n + c_{n-1} (a/b)^{n-1}+ \dots + c_1 (a/b) + c_0 &= 0 \\
      a^n + c_{n-1} a^{n-1}b+ \dots + c_1 ab^{n-1} + c_0b^n &= 0
    \end{align*}
    but this implies that $b|a$, implying that $b$ is a unit in $A$,
    and hence $\alpha = a/b\in A$.
  \end{proof}
\end{theorem}

\begin{corollary}
  $\Z$ is normal, and so is $k[x_1,\dots,x_n]$ where $k$ is a field.
\end{corollary}


\begin{definition}
  A \dfn{discrete valuation ring} also known as a \dfn{DVR} is a local
  PID.
\end{definition}

\begin{example}
  $\Z_{(p)}$, $k[X]_{(X)}$, and $k\lps X\rps$ are discrete valuation
  rings.
\end{example}


In this text, we require local rings to be Noetherian.


\begin{proposition}[Characterization of DVRs]
  Let $(A,\m)$ be a local domain. The following are equivalent:
  \begin{enumerate}
  \item $A$ is a discrete valuation ring.
  \item $A$ is a normal domain and $\h(\p)= 1$ for all nonzero prime
    ideals in $\spec(A)$.
  \item $A$ is a normal domain and the exists nonzero $m\in \m$ such
    that $\m\in\ass(A/m A)$.
  \item The ideal $\m$ is principal and nonzero.
  \end{enumerate}
  \begin{proof}
    (a)$\Rightarrow$(b) If $A$ is a DVR, then it is a PDF, hence it is
    a UFD, and it is integrally closed.  Since $A$ is local $\h(\m) =
    1$.

    (b)$\Rightarrow$(c) Consider nonzero $m\in \m$, so we have
    $\m\in\ass(A/m A)$.

    (c)$\Rightarrow$(d) Since $\m\in\ass(A/m A)$ there is an injection
    \[
    A/\m \into A/m A
    \]
    Let $\bar{x}$ be the image of $1$ under this map. In this case,
    \[
    x\in A \quad\text{but}\quad x\notin m A.
    \]
    On the other hand, $\m x \subset m A$. Hence $\m x m^{-1} \subset
    A$. Note, $xm^{-1}\notin A$, otherwise, $x\in mA$.

    Now we claim that $\m xm^{-1}\not\subset\m$. If it were the case
    that $\m xm^{-1}\subset \m\subset A$, then since $\m$ is finitely
    generated, we may use the determinant trick
    (Proposition~\ref{P:determinanttrick}) where $\phi$ is
    multiplication by $xm^{-1}$, to see that $xm^{-1}$ is integral
    over $A$, which is not the case since $A = \tilde{A}$.

    So, since $\m xm^{-1} \not\subset\m$ there must $g\in \m$ such
    that $u = gxm^{-1}\in\m$ is invertible in $A$.  Now given any
    element $e\in\m$, we may write
    \begin{align*}
      e &= e xm^{-1} g^{-1} x^{-1} m g \\
      &= (exm^{-1}) u^{-1} g
    \end{align*}
    so $\m = g A$.

    (d)$\Rightarrow$(a) We must show that $A$ is a PID. Suppose that
    $\m = gA$. So $\m^n = g^n A$, and by Corollary~\ref{C:intmax}, we
    have that $\bigcap \m^n = 0$. This means for any nonzero element
    $a\in A$, there exists $n$ such that $a\in g^n A$ but not in
    $g^{n+1}A$. Hence $a = g^nu$ where $u\notin\m$, and is hence
    invertible in $A$. So $a A = g^n A$. Thus every ideal can be
    broken into a sum of principal ideals, and each of these is of
    the form $g^i A$, hence this sum is also a principal ideal.
  \end{proof}
\end{proposition}


We will now give a criterion for a ring to be normal.

\begin{theorem}[Criterion for normality]
  Let $A$ be Noetherian, then $A$ is normal if and only if both of the
  following hold:
  \begin{enumerate}
  \item $A_\p$ is a DVR for all primes $\p$ of height $1$.
  \item For all $0 \neq m \in A$, if $\p \in \ass(A/mA)$, then $\h(\p) = 1$.
  \end{enumerate}
  \begin{proof}
    $(\Rightarrow)$ Suppose that $A$ is normal, then $A_\p$ is also
    normal. If $\h(\p) = 1$, then the previous proposition shows that
    $A_\p$ is a DVR.

    If $m\ne 0$, and $\p \in \ass(A/mA)$, then apply the previous
    proposition to see that $\h(\p) = 1$.

    $(\Leftarrow)$ Suppose that (a) and (b) hold above. Consider
    $b/a\in\ff(A)$ where $b/a\in A_\p$ for all $\p\in\spec(A)$. Now
    $b\in a A_\p$, so $b\in \p\in \ass(A_\p/aA_\p)$ so $\h(\p) = 1$
    for all $\p$.  So $b\in a A$. Hence $A = \bigcap A_\p$ where $\p$
    is a prime ideal of height $1$. Since each of the $A_\p$ are
    normal, so is $A$.
  \end{proof}
\end{theorem}


\begin{corollary}
  Let $A$ be normal and $\p$ be a prime ideal of height $1$. If
  $\ass(A/I) = \{\p\}$, then $I$ is a \dfn{symbolic power} of $\p$,
  meaning
  \[
  I = \p^{(n)} = \p^n A_\p \cap A.
  \]
  for  $n\ge 1$.
\end{corollary}



\section{Lying-over}

Let's witness lying-over with \macaulay.  Consider $R=\Q[x,y]$ and the
ideal $(x)\subset \Q[x,y]$, and $S = \Q[x,y,z]/(z^2 -xz -1)$. Note,
this is an integral extension.

We can use the \macaulay\ command \texttt{minimalPrimes} to find the
minimal elements of $\ass_S(R/xR)$. These will be the primes lying
over $(x)$ in $\spec(S)$.
\begin{macaulay2}
S = QQ[x,y,z]/(z^2-x*z-1);
minimalPrimes ideal x
\end{macaulay2}

From this code, we see that primes $(z-1,x)\subset S$ and
$(z+1,x)\subset S$ are the primes lying over $(x)$.



%% other things:
%% Galois actions on primes
%% More geometry

%% \begin{macaulay2}
%% S =ZZ/101[x,y]/(y^2-x^2)
%% minimalPrimes ideal (0_S)


%% restart
%% S =ZZ/101[x,y]/(x*y-1)
%% minimalPrimes ideal (x-1)
%% \end{macaulay2}


\end{document}
