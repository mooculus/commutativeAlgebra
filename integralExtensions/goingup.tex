\documentclass{ximera}

\input{../preamble}

\author{Bart Snapp}

\title{Going-up}

\begin{document}
\begin{abstract}
  We analyze the lying-over, going-up, and incomparable properties. Sources and references:
  \cite{GP2008,iK1974}.
\end{abstract}
\maketitle


First recall the lying-over, going-up, and incomparable properties:
\begin{description}
\item[Lying-over]\index{lying-over} If $\p\in\spec(R)$, then there exists a
  $P\in\spec(S)$ such that $P\cap R = \p$.
  \[
  \begin{tikzcd}[row sep=0em,column sep=0em]
    R    & \subset & S \\
    \cup &         & \cup \\
    \p   & \subset & \exists P
  \end{tikzcd}
  \]
\item[Going-up]\index{going-up} If $\p_1,\p_2\in\spec(R)$ with $\p_1\subset\p_2$ and
  $P_1\in\spec(S)$ with $P_1\cap R= \p$, then there exists $P_2$ with
  $P_1\subset P_2$ and $P_2\cap R = \p_2$.
  \[
  \begin{tikzcd}[row sep=0em,column sep=0em]
    R    & \subset & S \\
    \cup &         & \cup \\
    \p_2 & \subset & \exists P_2 \\
    \cup &         & \cup \\
    \p_1 & \subset & P_1  
  \end{tikzcd}
  \]
\item[Incomparable]\index{incomparable} If $P_1,P_2\in\spec(S)$ are
  distinct with $\p\in\spec(R)$ such that
  \[
  P_1\cap R= \p= P_2\cap R,
  \]
  then $P_1$ is incomparable to $P_2$ in $\spec(S)$, meaning
  \[
  P_1\not\subset P_2\quad\text{and}\quad P_2\not\subset P_1.
  \]
\end{description}
We will be setting up conditions where the these properties hold.  We
begin with another example of Eisenbud's phrase: ``ideals maximal with
respect to some property have an uncanny tendency to be prime.''


\begin{proposition}
  Let $R\subset S$ be rings and let $\p\in\spec(R)$. Consider the set
  \[
  \mathcal{S} = \{I\subset S: \text{$I$ is an ideal of $S$ and $(R-\p)\cap I = \emptyset$}\}.
  \]
  If $\mathcal{S}$ has a maximal element $P$, then $P\in\spec(S)$.
  \begin{proof}
    Let $P$ be a maximal element of $\mathcal{S}$. Seeking a
    contradiction, suppose that $xy\in P$ but $x\notin P$ and $y\notin
    P$. This means that $x\in R-\p$ and $y\in R-\p$, but this means
    that $xy\in R-\p$, a contradiction. Hence $P\in\spec(S)$.
  \end{proof}
\end{proposition}

\begin{exercise}
  If $R\subset S$ and $P\in\spec(S)$, show that $P\cap R\in\spec(R)$.
\end{exercise}


\begin{proposition}
  Let $R\subset S$ be rings and $\p\in\spec(R)$. The ring $S$ has the
  going-up property over $R$ if and only if $P\in\spec(S)$ is maximal in
  \[
  \mathcal{S} = \{I\subset S: \text{$I$ is an ideal of $S$ and
    $(R-\p)\cap I = \emptyset$}\}
  \]
  implies that $P\cap R = \p$.
  \begin{proof}
    $(\Rightarrow)$ Suppose $P\in\spec{S}$ is maximal in
    $\mathcal{S}$. We must show that the going-up property holds for
    $\p$.

    First note that $P\cap R\in\spec(R)$. By the construction of $P$,
    $P\cap R\subset \p$. Enlarge $P\cap R$ to $\p$.  By going-up,
    there exists $P'\in\spec(S)$ with $P'\cap R = \p$.
    \[
    \begin{tikzcd}[row sep=0em,column sep=0em]
      R    & \subset & S \\
      \cup &         & \cup \\
      \p & \subset & \exists P' \\
      \cup &         & \cup \\
      P\cap R & \subset & P  
    \end{tikzcd}
    \]
    Since $P$ is maximal in $\mathcal{S}$, we gave that $P=P'$.

    $(\Leftarrow)$ Suppose that $\p'\subset\p\in\spec(R)$ and that
    $P'\in\spec(S)$ with $P'\cap R = \p'$. Note, $P'\in\mathcal{S}$,
    taking the maximal element $P\in\mathcal{S}$, we have that $P\cap
    R = \p$. Hence $R\subset S$ has the going up property.
  \end{proof}
\end{proposition}


\begin{corollary}
  If a pair of rings $R\subset S$ has the going-up property, then they
  have the lying-over property.
  \begin{proof}
    We can always find a maximal element of sets like $\mathcal{S}$,
    so by our work above, going-up implies lying-over.
  \end{proof}
\end{corollary}


\begin{proposition}
  Let $R\subset S$ be rings and $\p\in\spec(R)$. The ring $S$ is
  incomparable over $R$ if and only if $P\in\spec(S)$ with $P\cap R
  =\p$ implies $P$ is maximal in
  \[
  \mathcal{S} = \{I\subset S: \text{$I$ is an ideal of $S$ and
    $(R-\p)\cap I = \emptyset$}\}.
  \]
\end{proposition}


\begin{theorem}[Going-up]
  Let $R\subset S$ be rings with $S$ integral over $R$. In this case:
  \begin{enumerate}
  \item The pair $R\subset S$ has the lying-over property.
  \item The pair $R\subset S$ has the going-up-property.
  \item The pair $R\subset S$ has the incomparable property.
  \end{enumerate}
  \begin{proof}
    From our work above, (b)$\Rightarrow$(a). Hence we will first
    prove (b).

    We must show that if $P$ is maximal in
    \[
    \mathcal{S} = \{I\subset S: \text{$I$ is an ideal of $S$ and
      $(R-\p)\cap I = \emptyset$}\},
    \]
    then $P\cap R = \p$. Seeking a contradiction, suppose that
    $x\in\p$ but $x\notin P\cap R$. Since $P$ is maximal in
    $\mathcal{S}$, it must be that
    \[
    (R-\p)\cap(P + (x)) \ne \emptyset.
    \]
    Suppose that $c\in (R-\p)\cap (P + (x))$ and write
    \[
    c = p + sx
    \]
    where $p\in P$, and $s\in S$. Since $S$ is integral over $R$, we
    have an integral relation for $s$
    \[
    s^n + a_{n-1}s^{n-1} + \dots + a_1 s + a_0 = 0
    \]
    where $a_i\in R$. Multiply this by $x^n$ to get
    \[
    (sx)^n + a_{n-1}(sx)^{n-1}x + \dots + a_1 (sx)x^{n-1} + a_0x^n = 0.
    \]
    Noting that $sx = c-p$, we have that $sx\equiv c$ modulo $P$.
    \[
    (c)^n + a_{n-1}(c)^{n-1}x + \dots + a_1 (c)x^{n-1} + a_0x^n = 0 \pmod{P}.
    \]
    Now, the left-hand side of the equation above is in $R$ and $P$,
    hence in
    \[
    (c)^n + a_{n-1}(c)^{n-1}x + \dots + a_1 (c)x^{n-1} + a_0x^n \in (P\cap R)\subset\p. 
    \]
    Since $x\in\p$, we see $c^n\in\p$, so $c\in\p$, a contradiction.


    Now we will prove (c). We will assume that $P\cap R = \p$ and we
    must show that $P$ is maximal in $\mathcal{S}$. Seeking a
    contradiction, suppose that $P\subsetneq
    I\in\mathcal{S}$. Consider $x\in I$ with $x\notin P$. Choose an
    integral dependence relation of least degree modulo $P$
    \[
    x^n + a_{n-1}x^{n-1} + \dots + a_1 x + a_0 \equiv 0 \pmod{P}
    \]
    We see that $a_0\in I$, and so $a_0\in I \cap R \subset \p \subset P$. But this means that
    \[
    x(x^{n-1} + a_{n-1}x^{n-2} + \dots + a_1)\in P
    \]
    with neither $x$, nor $(x^{n-1} + a_{n-1}x^{n-2} + \dots + a_1)$
    are in $P$, contradicting that $P$ is a prime ideal.
  \end{proof}
\end{theorem}



Let's witness lying-over with \macaulay.  Consider $R=\Q[x,y]$ and the
ideal $(x)\subset \Q[x,y]$, and $S = \Q[x,y,z]/(z^2 -xz -1)$. Note,
this is an integral extension.

We can use the \macaulay\ command \texttt{minimalPrimes} to find the
minimal elements of $\ass_S(R/xR)$. These will be the primes lying
over $(x)$ in $\spec(S)$.
\begin{macaulay2}
S = QQ[x,y,z]/(z^2-x*z-1);
minimalPrimes ideal x
\end{macaulay2}

From this code, we see that primes $(z-1,x)\subset S$ and
$(z+1,x)\subset S$ are the primes lying over $(x)$.





\end{document}
