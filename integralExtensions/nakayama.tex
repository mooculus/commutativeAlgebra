\documentclass{ximera}

\input{../preamble.tex}

\author{Bart Snapp}

\title{Nakayama's lemma}

\begin{document}
\begin{abstract}
  We introduce and prove Nakayama's lemma. Sources and references:
  \cite{AM1969,jpS2000}.
\end{abstract}
\maketitle

We start by introducing the \textit{Jacobson radical}, an ideal related to the nilradical.

\begin{definition}\index{JA@$\i J(A)$}
  If $R$ is a ring we define the \dfn{Jacobson radical} to be
  \[
  \i J(R) := \bigcap_{\m \text{ maximal}}\m.
  \]
\end{definition}

\begin{exercise}
  Prove that the Jacobson radical is an ideal.
\end{exercise}

\begin{proposition}\label{P:CharJR}
  Let $R$ be a ring, $j\in\i J(R)$ if and only if $1-jr$ is a unit in
  $R$ for all $r\in R$.
  \begin{proof}
    $(\Rightarrow)$ Seeking a contradiction, suppose that $j\in \i
    J(R)$ but $1-jr$ is not a unit in $R$. There is a maximal ideal
    $\m$ such that $1-jr\in\m$. However, $j\in\m$, implying that
    $jr\in\m$, and hence $1\in\m$. This would mean that $\m = R$, a
    contradiction.

    $(\Leftarrow)$ Suppose that $j\notin\i J(R)$, hence there is some
    maximal ideal $\m$ such that $j\notin\m$. Now, $(j)+\m = R$, so
    there is $r\in R$ and $m\in\m$ such that $jr+m = 1$. This means
    $1-jr\in\m$ and cannot be a unit.
  \end{proof}
\end{proposition}

\begin{exercise}
  Let $R$ be a ring. Show that $\rad{0}\subset \i J(R)$.
\end{exercise}

\begin{exercise}
  Let $R$ be a ring and consider $R[X]$. Show that $\rad{0_{R[X]}} =
  \i J(R[X])$.
\end{exercise}





We now introduce the ``determinant trick.''

\begin{proposition}[Determinant trick]\label{P:determinanttrick}
  Let $M$ be a finitely generated $R$-module and $I\subset R$ an ideal
  of $R$. If $\phi:M\to M$ is an $R$-module homomorphism such that
  $\phi(M)\subset I M$, then for some $a_i\in I$, $\phi$ satisfies and
  equation of the form
  \[
  \phi^n(x) + a_{n-1}\phi^{n-1}(x) + \dots + a_1 \phi(x)  + a_0 \phi^0(x)= 0.
  \]
  for all $x\in M$.
  \begin{proof}
    Let $\{m_1,\dots, m_n\}$ be a set of generators for $M$. Hence $\phi(m_i) \in I M$. Letting $a_{i,j}\in I$, we may write this:
    \begin{align*}
      \phi(m_1) &= a_{1,1}m_1 + a_{1,2}m_2 + \dots + a_{1,n}m_n\\
      \phi(m_2) &= a_{2,1}m_1 + a_{2,2}m_2 + \dots + a_{2,n}m_n\\
      &\hspace{.5em}  \vdots \\
      \phi(m_n) &= a_{n,1}m_1 + a_{n,2}m_2 + \dots + a_{n,n}m_n. 
    \end{align*}
    We can express this relationship as the following matrix equation:
    \[
    \begin{bmatrix}
      \phi - a_{1,1} & - a_{1,2} & \cdots & - a_{1,n}\\
      - a_{2,1} & \phi - a_{2,2} & \cdots & - a_{2,n}\\
      \vdots & \vdots & & \vdots \\
      -a_{n,1} & -a_{n,2} & \cdots & \phi - a_{n,n}
    \end{bmatrix}
    \begin{bmatrix}
      m_1\\
      m_2\\
      \vdots \\
      m_n
    \end{bmatrix}
    =
    \begin{bmatrix}
      0\\
      0\\
      \vdots\\
      0
    \end{bmatrix}
    \]
    Let $X$ be the $n \times n$ matrix shown.  Let $Y_i$ be the
    identity $n \times n$ matrix with the $i$th column replaced by the
    column in the above equation with entries $m_1,\dots,m_n$.  Then
    by the above equation, the $i$th column in the product $X\cdot
    Y_i$ will be the $0$ column for all $i$.  Thus $\det(X\cdot Y_i)
    =0$.  Therefore
    \[
    \det(X) m_i = \det(X) \det(Y_i) = \det(X \cdot Y_i) = 0.
    \]
    This means that $\det(X)$ is the zero endomorphism of
    $M$. Computing the determinant gives an equation of the desired
    form.
  \end{proof}
\end{proposition}

\begin{corollary}
  Let $R$ be a ring, $M$ be a finitely generated $R$-module, and
  $I\subset R$ be an ideal of $R$ such that $IM = M$. Then there is
  $x$ comaximal to $I$ such that $xM = 0$.
  \begin{proof}
    In the proposition above, set $\phi$ to be the identity map, and
    so for any $m\in M$,
    \[
    m + m a_{n-1} + \dots + m a_1 + m a_0 = 0.
    \]
    We set $x = 1 + a_{n-1} + \dots + a_1 + a_0$.
  \end{proof}
\end{corollary}

%% \begin{corollary}[Nakayama's lemma]
%%   Let $R$ be a ring, $M$ be a finitely generated $R$-module, and
%%   $I\subset R$ be an ideal with $I\subset \i J(R)$. In this case
%%   \[
%%   IM = M \quad\Rightarrow\quad M = 0.
%%   \]
%%   \begin{proof}
%%     By the corollary above, there exists $x$ comaximal to $\i J(R)$
%%     such that $xM = 0$. This means
%%     \begin{align*}
%%       xy + j &= 1\\
%%       xy &= 1-j,
%%     \end{align*}
%%     but $1-j$ is a unit by Proposition~\ref{P:CharJR}, hence $x$ is a
%%     unit. Thus $M = x^{-1}x M = 0$.
%%   \end{proof}
%% \end{corollary}

%% \begin{corollary}
%%   Let $R$ be a ring, $I\subset R$ be an ideal of $R$ with $I\subset \i
%%   J(R)$, $M$ be a finitely generated $R$-module, and $N\subset M$ a
%%   submodule of $M$. In this case
%%   \[
%%   M = IM + N \quad \Rightarrow \quad M = N.
%%   \]
%%   \begin{sketch}
%%     Apply Nakayama's lemma to $(M/N)$ and note by an isomorphism
%%     theorem that $I(M/N)\iso (IM + N)/N$.
%%   \end{sketch}
%% \end{corollary}

%% \begin{exercise}
%%   Let $(A,\m)$ be a local ring and $M$ a finitely generated
%%   $A$-module. Show that $M/\m M$ is a finitely generated $A/\m$-vector space.
%% \end{exercise}


%% We now come to an important fact when studying finitely generated
%% modules over local rings.

%% \begin{corollary}
%%   Let $(A,\m)$ be a local ring and $M$ a finitely generated
%%   $A$-module. Consider the canonical surjection
%%   \[
%%   M \to  M/\m M
%%   \]
%%   If $\{\bar{m}_1,\dots, \bar{m}_n\}$ form a basis for the $A/\m$-vector
%%   space $M/\m M$, then $\{m_1,\dots, m_n\}$ generate $M$.
%%   \begin{proof}
%%     The map
%%     \[
%%     \sum_{i=1}^n m_iA \to M \to M/\m M
%%     \]
%%     maps $\{m_1,\dots, m_n\}A$ onto $M/\m M$, so
%%     \[
%%     M = \m M + \sum_{i=1}^n m_iA 
%%     \]
%%     and $M = \sum_{i=1}^n m_iA$ by the corollary above.
%%   \end{proof}
%% \end{corollary}

In the next theorem, we give four equivalent statements, each of which
could be referred to as Nakayama's lemma. We will prove that the
statements are equivalent in the theorem below (though the first
follows from the proposition above).

\begin{theorem}[Nakayama's lemma]
  Let $R$ be a ring $M$ be a finitely generated $R$-module. Then:
  \begin{enumerate}
    \item Let $I\subset R$ be an ideal of $R$ such that $IM = M$. Then
      there is $x$ comaximal to $I$ such that $xM = 0$.
    \item Let $I\subset \i J(R)$ be an ideal of $R$. In this case
      \[
      IM = M \quad\Rightarrow\quad M = 0.
      \]
    \item $I\subset \i J(R)$ be an ideal of $R$ and $N\subset M$ a
      submodule of $M$. In this case
      \[
      M = IM + N \quad \Rightarrow \quad M = N.
      \]
    \item Let $(A,\m)$ be a local ring and $M$ a finitely generated
      $A$-module. Consider the canonical surjection
      \[
      M \to  M/\m M.
      \]
      If $\{\bar{m}_1,\dots, \bar{m}_n\}$ form a basis for the $A/\m$-vector
      space $M/\m M$, then $\{m_1,\dots, m_n\}$ generate $M$.
  \end{enumerate}
  \begin{proof} 
    (a)$\Rightarrow$(b) There exists $x$ comaximal to $\i J(R)$ such
    that $xM = 0$. This means
    \begin{align*}
      xy + j &= 1\\
      xy &= 1-j,
    \end{align*}
    but $1-j$ is a unit by Proposition~\ref{P:CharJR}, hence $x$ is a
    unit. Thus $M = x^{-1}x M = 0$.

    
    (b)$\Rightarrow$(c) Apply (b) to $(M/N)$ and note by an
    isomorphism theorem that $I(M/N)\iso (IM + N)/N$.

    
    (c)$\Rightarrow$(d) Let $\{\bar{m}_1,\dots,\bar{m}_n\}$ be a basis
    for $M/\m M$ as a $A/\m$-vector space. The map
    \[
    \sum_{i=1}^n m_iA \to M \to M/\m M
    \]
    maps $\{m_1,\dots, m_n\}A$ onto $M/\m M$, so
    \[
    M = \m M + \sum_{i=1}^n m_iA 
    \]
    and $M = \sum_{i=1}^n m_iA$ by part (c) above.

    
    (d)$\Rightarrow$(a) Suppose that $x$ is comaximal to $I$, hence
    \begin{align*}
      x + I &= R\\
      xM + IM &= M.
    \end{align*}
    Localize at $\m$, where $I\subset\m$
    \[
    xM_\m + I_\m M_\m = M_\m
    \]
    and mod out by $\m$,
    \[
    \frac{xM_\m + I_\m M_\m}{\m M_\m} = M_\m/\m M_\m.
    \]
    Since this is a $R_\m/\m R_\m$-vector space, we may break up the
    sum to see
    \[
    xM_\m/\m M_\m + I_\m M_\m/\m M_\m = M_\m/\m M_\m.
    \]
    However, since $I\subset\m$ and $M = IM$ we have
    \[
    xM_\m/\m M_\m =0.
    \]
    Since $x$ is comaximal with $\m$, this means $xM = 0$.
  \end{proof}
\end{theorem}


\section{Applications of Nakayama's lemma}

\begin{corollary}\label{C:intmax}
  Let $(A,\m)$ be a local ring, then
  \[
  \bigcap_{n\ge 1} \m^n  = (0)
  \]
  \begin{proof}
    Set $I = \bigcap_{n\ge 1} \m^n$. We will show that $\m I = I$, and
    hence by Nakayama, $I = (0)$.

    $(\subset)$ It is clear that $\m I \subset I$.

    $(\supset)$ We must show $I\subset \m I$. Consider a primary
    decomposition of $\m I$
    \[
    \m I = \bigcap_{i=1}^n \q_i.
    \]
    We must show that $I\subset\q_i$.  Let $\ass(A/\q_i) =
    \{\p_i\}$. If $\p_i = \m$, then $\q_i=\m$ and we are done, as
    every ideal is contained in the maximal ideal. Now suppose that
    $\p_i\ne\m$. Choose
    \begin{align*}
      x &\in I -\q_i\\
      y &\in \m - \p_i.
    \end{align*}
    From this we have $xy\in\m I \subset \q_i$. Hence $y\in\ann(\bar{x})$
    for some $\bar{x}\in A/\q_i$, which means $y\in \p_i$, a contradiction.
  \end{proof}
\end{corollary}


\begin{corollary}[Projective is free over a local ring]
  Let $(A,\m)$ be a local ring and $M$ be a finitely generated
  module. The module $M$ is projective if and only if it is free.
  \begin{proof}
    $(\Rightarrow)$ Let $M$ be a fintely generated projective
    $A$-module. Write $M$ minimally in terms of generators
    \[
    M = m_1 A + \dots + m_n A
    \]
    where by Nakayama's lemma, each $m_i$ maps to a basis element of
    the $A/\m$-vector space $M/\m M$.  Write
    \begin{align*}
      A^n &= M\dsum N \\
      (A/\m)^n &= M/\m M \dsum N\m N
    \end{align*}
    Since $M/\m M$ is an $n$-dimensional vector space, $N/\m N$ must
    be zero.

    $(\Leftarrow)$ Now we must show every free module is
    projective. Consider the following diagram:
    \[
    \begin{tikzcd}
                         & A^n\arrow[dl,dashed,swap,"\tilde\phi"]\arrow[d,"\phi"] & \\
      M \arrow[r,"\pi"]  & N  \arrow[r] & 0 
    \end{tikzcd}
    \]
    We must construct $\tilde\phi$ so that the diagram above
    commutes. The map $\phi$ is completely determined by where it maps
    basis elements of $A^n$. Since $\pi$ is surjective, for all basis
    elements $\vec{a}\in A^n$, there are $m\in M$ such that
    \[
    \phi(\vec{a}) = \pi(m).
    \]
    Hence for each basis element set $\tilde\phi(\vec{a}) = m$. This
    can be extended linearly to the entire free module.
  \end{proof}
\end{corollary}



For some interesting extra reading check out:
\begin{itemize}
\item\link[\textit{Projective modules}, I.\ Kaplansky, Annals of
  Mathematics, Second Series, Vol. 68, No. 2 (Sep., 1958), pp. 372--377]{https://www.jstor.org/stable/1970252}.
\end{itemize}

\end{document}
