\documentclass{ximera}

\input{../preamble.tex}

\author{Bart Snapp}

\title{The dimension theorem}

\begin{document}
\begin{abstract}
  We prove the dimension theorem. Sources and
  references: \cite{sD2008,hM1986}.
\end{abstract}
\maketitle


In this section, we will show that if $A$ is a local ring and $M$ is a
finitely generated $A$-module, then
\[
\dim(M) = d(M) = s(M). 
\]

We will prove this in three (or four) lemmas.

\begin{lemma}[$\boldsymbol{\dim(M)\le d(M)}$]\label{L:dimd}
  Let $(A,\m)$ be a local ring and $M$ be a finitely generated
  $A$-module. In this case
  \[
  \dim(M)\le d(M).
  \]
  \begin{proof}
    Proceeding by induction on $d(M)$. Suppose that $d(M) = 0$. Then 
    \[
    d(M) = P_M(n) = \l(M/\m^n M)
    \]
    is constant for $n$ sufficiently large. Thus for large enough $n$,
    \[
    \l(M/\m^n M) = \l(M/\m^{n+1}M).
    \]
    This shows us that $\l(\m^n M/\m^{n+1}M) = 0$. Hence $\m^n
    M/\m^{n+1}M = 0$. So,
    \[
    \m^n M = \m^{n+1}M = \m(\m^n M)
    \]
    and hence by Nakayama's Lemma,
    Theorem~\ref{NAK},\index{Nakayama's lemma} $\m^n M =0$ and hence
    $\m^n\subset\ann(M)$. Since
    \[
    \dim(M) = \dim(A/\ann(M))  = \dim(A/\sqrt{\ann(M)}) = \dim(A/\m),
    \]   
    we see that $\dim(M) = 0$. 
    
    Now assume $d(M) = n> 0$. Take any maximal chain 
    \[
    \p_0\subsetneq \p_1 \subsetneq \cdots \subsetneq \p_m
    \]
    in $\supp(M)$.  We need to show $m\le n$. We know that $\p_0$ is a
    minimal element of $\supp(M)$ and hence is a minimal element in
    $\ass(M)$.  So we have an injection
    \[
    A/\p_0\into M.
    \]
    Set $N = A/\p_0$.  By Corollary~\ref{C:sub}, $d(N) \le d(M)$.  So
    it suffices to show that $m \le d(N)$.  Let $x \in \p_1 - \p_0$.
    Consider the short exact sequence
    \[
    0\lto N \lto^{x} N \lto N/xN \lto 0.
    \]
    By Proposition~\ref{P:AddHS}, we have that
    \[
    P_N(n) = P_N(n) + P_{N/xN}(n) - r(n),
    \]
    where $\deg(r) < \deg(P_N) = d(N)$.  But then
    \[
    P_{N/xN}(n) = r(n).
    \]
    Thus $d(N/xN) = \deg(P_M) = \deg(r) < n$.  By the
    inductive hypothesis, $\dim(N/xN) \le d(N/xN)$.  Since
    \[
    \p_1 \subsetneq \cdots \subsetneq \p_m
    \]
    is a strict chain of prime ideals in $\supp(N/xN)$, we have that
    \[
    m - 1 \le \dim(N/xN) \le d(N/xN) \le n - 1.
    \]
    Hence $\dim(M) = m \le n = d(M)$.
  \end{proof}
\end{lemma}



\begin{lemma}[$\boldsymbol{d(M)\le s(M)}$]\label{L:ds}
  Let $(A,\m)$ be a local ring and $M$ be a finitely generated
  $A$-module. In this case
  \[
  d(M)\le s(M).
  \]
  \begin{proof}
    Proceed by induction on $s(M)$. If $s(M) = 0$, then
    $\l(M)< \infty$. This means that $P_M(n)$ is bounded, and hence
    $d(M) = 0$.

    Now suppose that $s(M) = m >0$. Consider a system of
    parameters $x_1,\dots, x_m\in \m$. In this case
    \[
    \l\left( \frac{M}{(x_1,\dots,x_m)M} \right)<\infty.
    \]
    Set $M_i = \frac{M}{(x_1,\dots,x_i)M}$. So we have that
    \[
    s(M_i) = s(M)-1.
    \]
    Now note
    \[
    \l(M_1/\m^n M_1) = \l\left(\frac{M}{x_1 M + \m^n M}\right).
    \]
    From the short exact sequence
    \[
    0\lto \frac{x_1M}{x_1 M \cap \m^n M} \lto  M/\m^n M \lto \frac{M}{x_1 M + \m^n M}\lto 0
    \]
    we see that
    \[
    \l\left(\frac{M}{x_1 M + \m^n M}\right) = \l(M/\m^n M) - \l \left(\frac{M}{x_1 M + \m^n M}\right).
    \]
    Note,
    \[
    \frac{M}{(\m^nM:x_1)}\iso \frac{M}{x_1 M + \m^n M}
    \]
    via the map $m\mapsto x_1 m$. Finally note
    \[
    M/\m^{n-1}M \onto \frac{M}{x_1 M + \m^n M},
    \]
    hence $\l(M/\m^{n-1}M)\ge \l\left(\frac{M}{x_1 M + \m^n
      M}\right)$. Putting this together we see
    \[
    \l(M_1/\m^n M_1) \ge \l(M/\m^n M) - \l(M/\m^{n-1}M)
    \]
    So, $d(M_1) \ge d(M) - 1$. Repeating this process we find
    \[
    d(M_m) \ge d(M) -m.
    \]
    Since $s(M_m) = 0$, we have $d(M_m) = 0$ so, $m\ge d(M)$.
  \end{proof}
\end{lemma}





\begin{lemma}[Prime Avoidance]\label{L:PA}\index{prime avoidance}
Let $A$ be a ring and $I$ be an ideal of $A$.  If $\p_1,\ldots,\p_n$
are prime ideals such that
\[
I \not\subseteq \p_i \qquad\text{for all $i$,}
\]
then 
\[
I \not\subset \bigcup_{i = 1}^n \p_i.
\]
\begin{proof}
  Proceed by induction on the number of prime ideals. If there is only
  one prime ideal, then we are done.

  Suppse the number of prime ideals is $n>1$. For each $i =
  1,\dots,n$, choose
  \[
  x_i \in I - \bigcup_{j \ne i} \p_j
  \]
  via the inductive hypothesis. WLOG, $x_i\in\p_i$, otherwise we are done.  Set
  \[
  x = x_1x_2\dots x_{n-1} + x_n \in I
  \]
  Thus if $x\in\p_i$, $1\le i\le n-1$, then $x_n\in \p_i$, a
  contradicition. If $x\in\p_n$, then
  \[
  x-x_n = x_1x_2\dots x_{n-1}\in \p_n.
  \]
  If $n = 2$, then $x_1\in \p_2$, HERE HERE
\end{proof}
\end{lemma}


\begin{remark}
  The above lemma is called \textit{prime avoidance} as if
  $I\not\subset \p_i$ for all $i$, then there is some element of $a
  \in I$ which \textit{avoids} being contained in any $\p_i$.
\end{remark}












\begin{lemma}[$\boldsymbol{s(M)\le\dim(M)}$]\label{L:sdim}
  Let $(A,\m)$ be a local ring and $M$ be a finitely generated
  $A$-module. In this case
  \[
  s(M)\le \dim(M).
  \]
  \begin{proof}
    Proceed by induction on $\dim(M)$. If $\dim(M) = 0$,
    \begin{align*}
      \dim(M) = 0 &\Leftrightarrow \ass_A(M)=\{\m\}, \\
      &\Leftrightarrow \l_A(M) <\infty,
    \end{align*}
    and so we see $s(M) = 0$.
    
    Now assume that $\dim(M)=n>0$. Let $\p_i$ be the minimal prime
    ideals in $\supp(M)$. By Theorem~\ref{T:AssassinsMinimal}, these
    primes are also minimal in $\ass(M)$ and there are only finitely
    many such primes. By the \index{prime avoidance}Prime Avoidance
    Lemma, we may pick $x\in\m$ such that $x$ is not in any of these
    minimal primes. Thus
    \[
    \dim(M/xM) <\dim(M)
    \]
    and thus by induction, $s(M/xM)\le\dim(M/xM)$. But $s(M)-1\le s(M/xM)$ and so
    \[
    s(m) \le s(M/xM) +1 \le \dim(M/xM) +1 \le \dim(M).
    \]
  \end{proof}
\end{lemma}



\begin{theorem}[The Dimension Theorem]\label{T:dimension}\index{Dimension Theorem}
  Let $A$ be a local ring and $M$ be a finitely generated
  $A$-module. Then
  \[
  \dim(M) = d(M) = s(M).
  \]
  \begin{proof}
    By Lemma~\ref{L:dimd}, Lemma~\ref{L:ds}, and Lemma~\ref{L:sdim} we have shown that
    \[
    \dim(M)\le d(M) \le s(M) \le \dim(M),
    \]
    and hence $\dim(M) = d(M) = s(M)$.
  \end{proof}
\end{theorem}



\begin{corollary} If $(A,\m)$ is a local ring, then it is has finite dimension.
\end{corollary}

\begin{proof} Since $A$ is Noetherian, $\m$ is finitely generated, thus $s(A)=\dim(A)$ is less than or equal to the number of generators of $\m$.
\end{proof}


\begin{corollary} If $(A,\m)$ is a local ring and $M$ is a finitely generated $A$-module, then 
\[
\dim_A(M) =\dim_{\hat{A}}(\hat{M}).
\]
\end{corollary}

\begin{proof} We know from Proposition~\ref{P:ComQuot}
\[
M/\m^n M \iso \hat{M}/\hat{\m^n} \hat{M} \iso \hat{M}/ \hat{\m}^n\hat{M},
\]
and so $P_\m(M,n) = P_{\hat{\m}}(\hat{M},n)$.
\end{proof}


\begin{corollary} If $(A,\m)$ is a local ring, then \index{primary}
\[
\dim(A) = \min\{i: (a_1,\dots,a_i) = \a\text{ where $\a$ is $\m$-primary}\}.
\]
\end{corollary}

\begin{proof} Let $\dim(A) = n$, then there exists $x_1,\dots,x_n$ a system of parameters of $A$ such that $\l(A/\x) <\infty$. Thus $(x_1,\dots,x_n)$ is $\m$-primary.  Since $s(A) = n$, we see that we cannot obtain $y_1,\dots,y_t$ with $t<n$ such that $\l(A/\mathbf{y})<\infty$.  So for any $y_1,\ldots,y_t$ with $t < n$, $(y_1,\ldots,y_t)$ is not $\m$-primary.
\end{proof}


\begin{corollary} If $A$ is a Noetherian ring, not necessarily local, consider any decreasing chain of prime ideals in $A$ 
\[
\p_0\supsetneq \p_1\supsetneq \cdots \supsetneq \p_i\supsetneq \cdots
\]
Then there exists $n$ such that $\p_n = \p_{n+1} = \cdots$.
\end{corollary}

\begin{proof} If we localize at $\p_0$, then $\dim(A_{\p_0}) <\infty$.  So for some $n$
\[
\p_n A_{\p_0} = \p_{n+1} A_{\p_0} = \cdots
\]
and so $\p_n = \p_{n+1} = \cdots$.
\end{proof}

\begin{definition}\index{height}\index{htp@$\h(\p)$} If $A$ is a Noetherian ring and $\p$ is a prime ideal of $A$, then the \textbf{height} of $\p$ is 
\[
\h(\p) = \sup\left\{n : \begin{minipage}{15em}there exists a chain of prime ideals $\p_0\subsetneq \p_1 \subsetneq \cdots \subsetneq \p_{n-1}\subsetneq \p_n =\p$\end{minipage} \right\}.
\]
\end{definition}

\begin{remark} Note that $\h(\p) = \dim(A_\p)$.
\end{remark}

\begin{definition}\index{height}\index{hti@$\h(I)$} If $A$ is a Noetherian ring and $I$ is any ideal of $A$, then the \textbf{height} of $I$ is 
\begin{align*}
\h(I) &= \inf\{\h(\p): I\subset\p\} \\
&= \inf\{\h(\p): \p \text{ is minimal in $\ass_A(A/I)$}\}.
\end{align*}
\end{definition}

\begin{definition}\index{coheight}\index{coht@$\mathrm{coht}(I)$} If $A$ is a Noetherian ring and $I$ is any ideal, then the \textbf{coheight}, denoted $\mathrm{coht}(I)$ is defined as 
\[
\mathrm{coht}(I) = \dim(A/I).
\]
\end{definition}

\begin{exercise} Check that for any ideal $I$, $\h(I)+\dim(A/I)\le\dim(A)$. 
\end{exercise}

\begin{warning}
Even if $I$ is a prime ideal, the above inequality may be strict.
\end{warning}

\begin{corollary}[Krull's Ideal Theorem]\label{C:KIT}\index{Krull's Ideal Theorem} Let $A$ be a Noetherian ring and $\p$ is a prime ideal.  Then $\h(\p)\le n$ if and only if there exist $a_1,\dots,a_n\in\p$ such that $\p$ is a minimal prime containing $(a_1,\dots,a_n)$.
\end{corollary}

\begin{proof} Since $\h(\p) = \dim(A_\p)$, $\dim(A_\p)\le n$ if and only if there exists 
\[
\frac{x_1}{u_1}, \dots, \frac{x_n}{u_n}
\]
in $A_\p$ such that 
\[
\left(\frac{x_1}{u_1}, \dots, \frac{x_n}{u_n}\right)
\]
is $\p A_\p$-primary. This is the case if and only if there exist $x_1,\dots, x_n\in \p$ and $\p$ contains $(x_1,\dots,x_n)$ minimally. 
\end{proof}


\begin{corollary}[Krull's Principal Ideal Theorem]\index{Krull's Principal Ideal Theorem} Let $A$ be a Noetherian ring and $x$ be an element of $A$ which is not a unit or a zerodivisor. Then every prime which contains $(x)$ minimally has height $1$.
\end{corollary}

\begin{proof} By Corollary~\ref{C:KIT} the minimal prime containing $(x)$ has height at most one. The prime $\p$ containing $(x)$ cannot have height zero, as then $\p\in\ass(A)$ by Corollary~\ref{C:SA} and hence then every element of $\p$ is a zero divisor, which is not the case.
\end{proof}

\begin{remark} The above corollary to the Dimension Theorem is sometimes called \textbf{Krull's Hauptidealsatz}.\index{Krull's Hauptidealsatz}
\end{remark}

\begin{corollary}\label{C:nzdd-1} Let $(A,\m)$ be a local ring and $x$ be an element of $\m$ which is not a zerodivisor. Then $\dim(A/xA) = \dim(A)-1$.
\end{corollary}

\begin{proof} This follows from the previous corollary and the definition of dimension.
\end{proof}


\begin{exercise} If $(A,\m)$ is a local ring and $M$ is a finitely generated $A$-module with $x_1,\dots,x_i\in\m$, then 
\[
\dim(M/(x_1,\dots,x_i)M)\ge \dim(M) -i.
\]
Equality holds if and only if $x_1,\dots,x_i$ form part of a system of parameters for $M$.
\end{exercise}

\begin{exercise} Let $A$ be a Noetherian ring of dimension at least $2$. Then $A$ has infinitely many prime ideals of height $1$.
\end{exercise}

\begin{example} A ring $A$ is Artinian if and only if $\dim(A) = 0$. \index{Artinian!ring}
\end{example}

\begin{example} A PID has dimension one.
\end{example}

\begin{example} $\dim(\Z) = 1$.
\end{example}

\begin{example} If $k$ is a field, then $\dim(k[X]) = 1$.
\end{example}

\begin{example} If $k$ is a field, then $\dim(k\lps x \rps) = 1$.
\end{example}


\begin{lemma}\label{L:FT1} If $A$ is a ring and $P_1\subsetneq P_2$ are two prime ideals of $A[X]$ such that
\[
P_1\cap A = P_2\cap A = \p,
\]
then $P_1 = \p[X]$.
\end{lemma}

\begin{proof} Suppose not. Then 
\[
\p[X]\subsetneq P_1\subsetneq P_2 
\]
and so 
\[
(0) \subsetneq (P_1/\p)[X] \subsetneq (P_2/\p)[X]
\]
in $(A/\p) [X]$. Set $U = A-\p$.  Since $P_1 \cap U = P_2 \cap U = \emptyset$, and since localizations are exact, we have
\[
(0) \subsetneq U^{-1}(P_1/\p)[X] \subsetneq U^{-1}(P_2/\p)[X]
\]
is a strict chain of prime ideals in $(A_\p/\p A_\p)[X] = U^{-1}(A/\p)[X]$.  But this contradicts that $\dim(k[X]) = 1$ when $k$ is a field as $k[X]$ is a PID, hence all primes are principal and so are of height one or zero.  Thus $P_1 = \p[X]$.
\end{proof}


\begin{lemma}\label{L:FT2} If $A$ is Noetherian and $I$ is an ideal of $A$, then
\[
\h(I) = \h(I\cdot A[X]).
\]
\end{lemma}

\begin{proof} By the Primary Decomposition Theorem, Theorem~\ref{T:PDT}, 
\[
\ass\left(\frac{A[X]}{IA[X]}\right) = \{\p_i[X]: \p_i\in\ass(A/I)\},
\]
as $A/I$ injects into $A/I [X]$. So it is enough to show that if $\p$ is a prime ideal in $A$, then 
\[
\h(\p) = \h(\p[X]).
\]
Suppose that $\h(\p) = n$. Then there exist $a_1,\dots,a_n\in \p$ such that $\p\supset(a_1,\dots,a_n)$ minimally. By the Primary Decomposition Theorem, Theorem~\ref{T:PDT}, we see that $\p[X]\supset(a_1,\dots,a_n)[X]$ minimally. Thus $\h(\p[X])\le n$.

On the other hand, if 
\[
\p_0 \subsetneq \p_1 \subsetneq \cdots \subsetneq \p_n = \p
\] 
is a chain of prime ideals where $\h(\p) = n$, then 
\[
\p_0[X] \subsetneq \p_1[X] \subsetneq \cdots \subsetneq \p_n[X] = \p[X]
\]
is a chain of prime ideals in $A[X]$. Thus $\h(\p[X])\ge \h(\p)$ and so we see that $\h(\p[X]) = \h(\p)$. 
\end{proof}


\begin{theorem} If $A$ is a Noetherian ring, $\dim(A[X]) = \dim(A) + 1$.
\end{theorem}

\begin{proof} First note that given a chain of primes $\p_0 \subsetneq \cdots \subsetneq \p_n$ in $A$, we can construct the chain of primes $\p_0 A[X] \subsetneq \cdots \subsetneq \p_n A[X] \subsetneq \p_n A[X] + x A[X]$ in $A[X]$.  It is then clear that $\dim(A[X]) \ge \dim(A) + 1$, so it is enough to show $\dim(A[X]) \le\dim(A) + 1$. If $\dim(A) = \infty$, then there is nothing to prove. We will proceed by induction on the dimension of $A$. If $\dim(A) = 0$, then for $P_i$ a prime ideal in $A[X]$ write $\p_i = P_i\cap A$.  So if 
\[
P_0\subsetneq P_1\subsetneq \cdots \subsetneq P_n
\]
then since $\dim(A) = 0$, we have $\p_0 = \p_1 = \cdots = \p_n$. Thus by Lemma~\ref{L:FT1}, we have 
\[
\p_0[x] = P_0 = P_1 = \cdots = P_{n-1}\subsetneq P_n.
\]
Thus $n\le 1$ and so we see that $\dim(A[X]) = 1$.

Now suppose that $\dim(A) = n >0$ and let $P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_n$ be a strict chain of prime ideals in $A$.  Set $\p_i = P_i \cap A$.  

Case 1: Suppose that $\p_{n-1} \subsetneq \p_n$. Then
\[
\dim(A_{\p_{n-1}})< \dim(A).
\]
By induction we then have that $\dim(A_{\p_{n-1}}[X]) = \dim(A_{\p_{n-1}})+1\le \dim(A)$. In $A_{\p_{n-1}}[X]$ we have a strict chain
\[
P_0A_{p_{n-1}} \subsetneq P_1A_{p_{n-1}} \subsetneq \cdots \subsetneq P_{n-1}A_{p_{n-1}}
\] 
and thus 
\[
n-1 \le \dim(A_{\p_{n-1}})[X]\le \dim(A). 
\]
Thus $n \le\dim(A) +1$ and so  $\dim(A[X]) = \dim(A) + 1$.

Case 2: Suppose that $\p_{n-1} = \p_n$. By Lemma~\ref{L:FT1}, we have $P_{n-1} = \p_{n-1}[X]$.  By Lemma~\ref{L:FT2}, we have $\h(\p_{n-1}[X])=\h(\p_{n-1})$.  Thus
\[
\dim(A) \ge \h(\p_{n-1}) = \h(P_{n-1}) \ge n-1.
\]
Thus $n\le \dim(A) + 1$ and so we see that $\dim(A[X]) = \dim(A) +1$.
\end{proof}

\begin{exercise} If $A$ is Noetherian, show that 
\[
\dim(A\lps X \rps) = \dim(A) + 1
\]
Hint: Does every maximal ideal in $A\lps X \rps$ contain $X$?
\end{exercise}


\begin{corollary} We have that if $k$ is a field, then
\begin{align*}
\dim(k[X_1,\ldots,X_n]) &= \dim(k\lps X_1,\dots,X_n\rps) = n, \\
\dim(\Z[X_1,\ldots,X_n]) &= \dim(\Z\lps X_1,\dots,X_n\rps) = n+1, \\
\dim(\Z_{(p)}[X_1,\ldots,X_n]) &= \dim(\Z_{(p)}\lps X_1,\dots,X_n\rps) = n+1.
\end{align*}
\end{corollary}



\end{document}
